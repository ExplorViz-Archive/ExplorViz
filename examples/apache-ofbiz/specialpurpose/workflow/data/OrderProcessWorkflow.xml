<?xml version="1.0" encoding="UTF-8"?>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->

<entity-engine-xml>
    <WorkflowSpecification specificationId="XPDL" currentVersion="0.03"/>
    <WorkflowPackage packageId="org.ofbiz.order" packageVersion="20030730144901" packageName="" description="Demo Order Processing Workflow" specificationVersion="0.03" specificationId="XPDL" sourceVendorInfo="OFBiz.org" creationDateTime="2002-12-03 00:00:00.0" author="Andy Zeneski" publicationStatusId="WPS_UNDER_REVISION" graphConformanceEnumId="WGC_FULL_BLOCKED" priorityUomId="P" costUomId="USD" responsibleListId="10002" documentationUrl="None"/>
    <WorkflowProcess packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" objectName="Processes incoming orders" objectPriority="5" description="Order Processing Workflow" creationDateTime="2002-12-01 12:00:00.0" author="OFBiz" publicationStatusId="WPS_UNDER_REVISION" timeLimit="12.0" validFromDate="2002-12-01 12:00:00.0" validToDate="2012-12-01 12:00:00.0" responsibleListId="10003" durationUomId="h" duration="3.0" waitingTime="2.0" defaultStartActivityId="receiveOrder" sourceReferenceField="orderId"/>

    <WorkflowDataField packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" dataFieldId="adminEmailList" dataFieldName="adminEmailList" initialValue="ofbiztest@example.com" dataTypeEnumId="WDT_STRING" isArray="N"/>
    <WorkflowFormalParam packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" applicationId="_NA_" formalParamId="orderId" indexNumber="1" modeEnumId="WPM_IN" description="The order number" dataTypeEnumId="WDT_STRING"/>

    <WorkflowParticipant packageId="org.ofbiz.order" packageVersion="20030730144901" processId="_NA_" processVersion="_NA_" participantId="BUYER" participantName="Purchase Order Approval Role" description="Reviews and approves/rejects orders" participantTypeId="ROLE"/>
    <WorkflowParticipant packageId="org.ofbiz.order" packageVersion="20030730144901" processId="_NA_" processVersion="_NA_" participantId="ORDER_CLERK" participantName="Sales Order Approval Role" description="Reviews and approves/rejects orders" participantTypeId="ROLE"/>
    <WorkflowParticipant packageId="org.ofbiz.order" packageVersion="20030730144901" processId="_NA_" processVersion="_NA_" participantId="admin" participantName="Workflow Admin" description="Workflow Admin - Used for automatic activities" participantTypeId="HUMAN"/>
    <WorkflowParticipantList participantListId="10002" packageId="org.ofbiz.order" packageVersion="20030730144901" processId="_NA_" processVersion="_NA_" participantId="admin" participantIndex="1"/>
    <WorkflowParticipantList participantListId="10003" packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" participantId="admin" participantIndex="1"/>

    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="approveOrderEvent" objectName="Approve Order Event" objectPriority="1" description="Activity runs after an order is approved" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="approvePurchaseOrder" objectName="Approve Purchase Order #${orderId}" objectPriority="5" timeLimit="12.0" startModeEnumId="WAM_MANUAL" finishModeEnumId="WAM_MANUAL" performerParticipantId="BUYER" activityTypeEnumId="WAT_NO" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="approveSalesOrder" objectName="Approve Sales Order #${orderId}" objectPriority="5" timeLimit="12.0" startModeEnumId="WAM_MANUAL" finishModeEnumId="WAM_MANUAL" performerParticipantId="ORDER_CLERK" activityTypeEnumId="WAT_NO" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="cancelOrder" objectName="Cancel The Order" objectPriority="5" description="Order has been cancelled; cancel the order and abort the workflow" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="cancelWorkflow" objectName="Cancel Workflow" objectPriority="1" description="Transition Activity To Abort Workflow" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="checkSalesOrder" objectName="Check Sales Order" objectPriority="1" description="Checks the status of the sales order" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_ROUTE" canStart="Y" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="orderNotReady" objectName="Order Not Ready" objectPriority="5" description="The order is not ready for processing; suspend and wait for action" timeLimit="72.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitService="sendProcessNotification" limitAfterStart="N" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="Y"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="receiveOrder" objectName="Receive Order" objectPriority="1" description="Initial activity when order is received" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="Y" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivity packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="rejectOrder" objectName="Reject The Order" objectPriority="5" description="Order was not appoved; reject the order" timeLimit="1.0" startModeEnumId="WAM_AUTOMATIC" finishModeEnumId="WAM_AUTOMATIC" performerParticipantId="admin" activityTypeEnumId="WAT_TOOL" canStart="N" joinTypeEnumId="WJT_XOR" splitTypeEnumId="WST_XOR" acceptAllAssignments="N" completeAllAssignments="N" limitAfterStart="Y" delegateAfterStart="Y" restartOnDelegate="N" inheritPriority="N"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="approveOrderEvent" toolId="approveOrderChangeItemStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderItemStatus|statusId=ITEM_APPROVED"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="approveOrderEvent" toolId="approveOrderChangeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_APPROVED"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="cancelOrder" toolId="cancelOrderChangeItemStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderItemStatus|statusId=ITEM_CANCELLED"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="cancelOrder" toolId="cancelOrderChangeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_CANCELLED"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="cancelWorkflow" toolId="cancelOrderCancelWorkflow" toolTypeEnumId="WTT_PROCEDURE" actualParameters="workEffortId" extendedAttributes="runAsUser=admin|serviceName=wfCancelWorkflow"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="orderNotReady" toolId="orderNotReadySuspend" toolTypeEnumId="WTT_PROCEDURE" actualParameters="workEffortId" extendedAttributes="runAsUser=admin|serviceName=wfSuspendActivity"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="receiveOrder" toolId="receiveOrderInformation" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId" extendedAttributes="runAsUser=admin|serviceName=getOrderHeaderInformation"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="rejectOrder" toolId="rejectOrderChangeItemStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderItemStatus|statusId=ITEM_REJECTED"/>
    <WorkflowActivityTool packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" activityId="rejectOrder" toolId="rejectOrderChangeOrderStatus" toolTypeEnumId="WTT_PROCEDURE" actualParameters="orderId,statusId" extendedAttributes="runAsUser=admin|serviceName=changeOrderStatus|statusId=ORDER_REJECTED"/>

    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans1.0" transitionName="Purchase Order" conditionExpr="orderTypeId.equals(&quot;PURCHASE_ORDER&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="receiveOrder" toActivityId="approvePurchaseOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans1.1" transitionName="Sales Order" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="receiveOrder" toActivityId="checkSalesOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans2.0" transitionName="Goto Order Approve" conditionExpr="statusId.equals(&quot;ORDER_PROCESSING&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="checkSalesOrder" toActivityId="approveSalesOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans2.1" transitionName="Wait For Order Change" conditionExpr="statusId.equals(&quot;ORDER_CREATED&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="checkSalesOrder" toActivityId="orderNotReady" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans3.0" transitionName="Cancel Order" conditionExpr="approvalCode.equals(&quot;0&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approvePurchaseOrder" toActivityId="cancelOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=0"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans3.1" transitionName="Reject Order" conditionExpr="approvalCode.equals(&quot;1&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approvePurchaseOrder" toActivityId="rejectOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=1"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans3.2" transitionName="Approve Order" conditionExpr="approvalCode.equals(&quot;2&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approvePurchaseOrder" toActivityId="approveOrderEvent" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=2"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans3.3" transitionName="Invalid Response" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="approvePurchaseOrder" toActivityId="receiveOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans4.0" transitionName="Cancel Order" conditionExpr="approvalCode.equals(&quot;0&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveSalesOrder" toActivityId="cancelOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=0"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans4.1" transitionName="Reject Order" conditionExpr="approvalCode.equals(&quot;1&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveSalesOrder" toActivityId="rejectOrder" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=1"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans4.2" transitionName="Approve Order" conditionExpr="approvalCode.equals(&quot;2&quot;)" conditionTypeEnumId="WTC_CONDITION" fromActivityId="approveSalesOrder" toActivityId="approveOrderEvent" loopTypeEnumId="WTL_NOLOOP" extendedAttributes="approvalCode=2"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans4.3" transitionName="Invalid Response" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="approveSalesOrder" toActivityId="receiveOrder" loopTypeEnumId="WTL_NOLOOP"/>
    <WorkflowTransition packageId="org.ofbiz.order" packageVersion="20030730144901" processId="ProcessOrder" processVersion="20030730144901" transitionId="trans5.0" transitionName="Order not ready for processing" conditionTypeEnumId="WTC_OTHERWISE" fromActivityId="orderNotReady" toActivityId="receiveOrder" loopTypeEnumId="WTL_NOLOOP"/>
</entity-engine-xml>
